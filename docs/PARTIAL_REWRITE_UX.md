# UX частичного переписывания текста (Canvas-режим)

## 🎨 Визуальное описание

### 1. Открытие редактора из бэклога

Когда пользователь открывает контент из бэклога для редактирования:

```
┌─────────────────────────────────────────────────────────────┐
│  Edit Content: "How to Validate Your Startup Idea..."      │
├─────────────────────────────────────────────────────────────┤
│  [DRAFT]                                                     │
│                                                              │
│  Article Image                                               │
│  [Generate Image]                                            │
│                                                              │
│  Article Content                                             │
│  ┌──────────────────────────────────────────────────────┐  │
│  │ [Rich Text Editor - ReactQuill]                      │  │
│  │                                                       │  │
│  │  <h1>Introduction</h1>                               │  │
│  │  <p>Starting a business requires careful planning    │  │
│  │  and validation. This guide will help you...</p>      │  │
│  │                                                       │  │
│  │  <h2>Key Steps</h2>                                   │  │
│  │  <p>First, identify your target market...           │  │
│  │  [ВЫДЕЛЕННЫЙ ТЕКСТ] Second, create a minimum        │  │
│  │  viable product to test your assumptions...          │  │
│  │  [КОНЕЦ ВЫДЕЛЕНИЯ] Finally, gather feedback...</p>  │  │
│  │                                                       │  │
│  └──────────────────────────────────────────────────────┘  │
│                                                              │
│  ┌──────────────────────────────────────────────────────┐  │
│  │ 🎨 Selected: "Second, create a minimum viable..."    │  │
│  │                                                       │  │
│  │  [Optional instruction input field]                   │  │
│  │  "make it more engaging and add examples"            │  │
│  │                                                       │  │
│  │  [✨ Rewrite Selection]                               │  │
│  └──────────────────────────────────────────────────────┘  │
│                                                              │
│  [Cancel]  [Save Draft]  [✅ Approve & Add to Queue]        │
└─────────────────────────────────────────────────────────────┘
```

### 2. Процесс работы

#### Шаг 1: Выделение текста
- Пользователь выделяет часть текста в редакторе (как обычно в любом текстовом редакторе)
- Текст подсвечивается стандартным способом браузера

#### Шаг 2: Появление панели переписывания
После выделения текста автоматически появляется панель:

```
┌──────────────────────────────────────────────────────┐
│ 🎨 Selected: "Second, create a minimum viable       │
│            product to test your assumptions..."     │
│                                                      │
│  ┌──────────────────────────────────────────────┐  │
│  │ Optional: How should this text be rewritten? │  │
│  │ [make it more engaging and add examples]     │  │
│  └──────────────────────────────────────────────┘  │
│                                                      │
│  [✨ Rewrite Selection]  (или [🔄 Rewriting...])     │
└──────────────────────────────────────────────────────┘
```

**Визуальные характеристики панели:**
- Фиолетовая рамка (`border-purple-200`)
- Светло-фиолетовый фон (`bg-purple-50`)
- Показывает первые 50 символов выделенного текста
- Поле для опциональной инструкции
- Кнопка "Rewrite Selection" с иконкой ✨

#### Шаг 3: Переписывание
- При нажатии "Rewrite Selection" кнопка показывает спиннер
- Текст "Rewriting..." с анимацией загрузки
- Выделенный текст заменяется на новую версию
- Панель исчезает после успешного переписывания

### 3. Визуальные состояния

#### Состояние 1: Нет выделения
```
[Rich Text Editor - обычный вид]
```

#### Состояние 2: Текст выделен
```
[Rich Text Editor]
┌─────────────────────────────────────┐
│ 🎨 Selected: "выделенный текст..."  │
│ [Optional instruction]              │
│ [✨ Rewrite Selection]               │
└─────────────────────────────────────┘
```

#### Состояние 3: Идет переписывание
```
[Rich Text Editor]
┌─────────────────────────────────────┐
│ 🎨 Selected: "выделенный текст..."  │
│ [Optional instruction]              │
│ [🔄 Rewriting...] (disabled)        │
└─────────────────────────────────────┘
```

#### Состояние 4: Успешно переписано
```
[Rich Text Editor - текст заменен]
[Панель исчезает]
[Toast: "Text selection rewritten successfully"]
```

### 4. Пример использования

**Исходный текст:**
```
Starting a business requires careful planning and validation. 
This guide will help you understand the key steps.
```

**Пользователь выделяет:** `"careful planning and validation"`

**Панель показывает:**
```
🎨 Selected: "careful planning and validation"
[Optional: make it sound more professional]
[✨ Rewrite Selection]
```

**После переписывания:**
```
Starting a business requires strategic planning and thorough 
market validation. This guide will help you understand the 
key steps.
```

### 5. Интеграция с существующим UI

Панель переписывания находится:
- **Между** редактором и секцией "Regenerate Content"
- **Выше** кнопок действий (Cancel, Save, Approve)
- Появляется **только когда** есть выделенный текст
- Исчезает **автоматически** после переписывания

### 6. Цветовая схема

- **Панель переписывания**: Фиолетовая (`purple-50` фон, `purple-200` рамка)
- **Кнопка**: Фиолетовая (`purple-100` фон, `purple-300` рамка)
- **Иконка**: Sparkles ✨ (символизирует AI-переписывание)
- **Текст выделения**: Стандартное выделение браузера

### 7. Адаптивность

- На мобильных устройствах панель занимает всю ширину
- Текст выделения обрезается до 50 символов с "..."
- Кнопка всегда видна и доступна

---

## ✅ Преимущества этого подхода

1. **Не мешает редактированию** - панель появляется только при выделении
2. **Интуитивно понятно** - стандартное выделение текста
3. **Гибкость** - можно добавить инструкцию или переписать без инструкции
4. **Визуальная обратная связь** - видно, что идет процесс переписывания
5. **Не перегружает интерфейс** - панель компактная и информативная

---

## 🎯 Итоговый вид редактора

```
┌─────────────────────────────────────────────────────────────┐
│  Edit Content: [Title]                                      │
├─────────────────────────────────────────────────────────────┤
│  [Status Badge]                                              │
│                                                              │
│  Article Image                                              │
│  [Generate Image]                                            │
│                                                              │
│  Article Content                                             │
│  ┌──────────────────────────────────────────────────────┐  │
│  │ [Rich Text Editor - можно выделять текст]            │  │
│  └──────────────────────────────────────────────────────┘  │
│                                                              │
│  ┌──────────────────────────────────────────────────────┐  │
│  │ 🎨 Selected: "..." (появляется при выделении)       │  │
│  │ [Optional instruction]                                │  │
│  │ [✨ Rewrite Selection]                               │  │
│  └──────────────────────────────────────────────────────┘  │
│                                                              │
│  ┌──────────────────────────────────────────────────────┐  │
│  │ 🔄 Regenerate Content                                │  │
│  │ [Optional prompt]                                    │  │
│  │ [Regenerate Content]                                 │  │
│  └──────────────────────────────────────────────────────┘  │
│                                                              │
│  [Cancel]  [Save Draft]  [✅ Approve]                       │
└─────────────────────────────────────────────────────────────┘
```




