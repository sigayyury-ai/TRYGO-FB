# GraphQL Schema: SEO Agent Integration

**Source**: Integrated from `backend/src/schema/typeDefs.ts`  
**Target**: `TRYGO-Backend/src/typeDefs/seoAgentTypeDefs.graphql` (to be merged/updated)

## Enums

```graphql
enum SeoClusterIntent {
  COMMERCIAL
  TRANSACTIONAL
  INFORMATIONAL
  NAVIGATIONAL
}

enum BacklogCategory {
  PAIN
  GOAL
  TRIGGER
  FEATURE
  BENEFIT
  FAQ
  INFO
}

enum BacklogStatus {
  PENDING
  SCHEDULED
  IN_PROGRESS
  COMPLETED
  ARCHIVED
  BACKLOG
  PUBLISHED
}

enum ContentCategory {
  PAINS
  GOALS
  TRIGGERS
  PRODUCT_FEATURES
  BENEFITS
  FAQS
  INFORMATIONAL
}

enum ContentFormat {
  ARTICLE
  BLOG
  COMMERCIAL_PAGE
  LANDING_PAGE
}

enum ContentStatus {
  DRAFT
  READY
  PUBLISHED
}

enum ContentType {
  ARTICLE
  COMMERCIAL_PAGE
}
```

## Types

```graphql
type SeoCluster {
  id: ID!
  projectId: ID!
  hypothesisId: ID!
  title: String!
  intent: SeoClusterIntent!
  keywords: [String!]!
  createdBy: ID
  updatedBy: ID
  createdAt: DateTime!
  updatedAt: DateTime!
}

type BacklogIdea {
  id: ID!
  projectId: ID!
  hypothesisId: ID
  clusterId: ID
  title: String!
  description: String
  contentType: ContentType!
  category: BacklogCategory
  status: BacklogStatus!
  scheduledDate: DateTime
  createdBy: ID
  updatedBy: ID
  createdAt: DateTime!
  updatedAt: DateTime!
}

type ContentIdea {
  id: ID!
  projectId: ID!
  hypothesisId: ID!
  backlogIdeaId: ID
  title: String!
  category: ContentCategory!
  contentType: ContentType!
  status: String!
  isDismissed: Boolean!
  isAddedToBacklog: Boolean!
  createdAt: DateTime!
  updatedAt: DateTime!
}

type ContentItem {
  id: ID!
  projectId: ID!
  hypothesisId: ID!
  backlogIdeaId: ID
  title: String!
  category: ContentCategory!
  format: ContentFormat!
  ownerId: ID
  reviewerId: ID
  channel: String
  outline: String
  content: String
  imageUrl: String
  status: ContentStatus!
  dueDate: DateTime
  createdBy: ID
  updatedBy: ID
  createdAt: DateTime!
  updatedAt: DateTime!
}

type PostingSettings {
  id: ID!
  projectId: ID!
  hypothesisId: ID
  weeklyPublishCount: Int!
  preferredDays: [String!]!
  timezone: String
  autoPublishEnabled: Boolean!
  language: String
  wordpressBaseUrl: String
  wordpressUsername: String
  wordpressConnected: Boolean!
  wordpressPostType: String
  wordpressDefaultCategoryId: Int
  wordpressDefaultTagIds: [Int!]!
  updatedAt: DateTime
}

type RewriteTextSelectionResult {
  rewrittenText: String!
  success: Boolean!
  error: String
}

type PublishToWordPressResult {
  success: Boolean!
  wordPressPostId: Int
  wordPressPostUrl: String
  error: String
}

type TestWordPressConnectionResult {
  success: Boolean!
  message: String
  error: String
}

type WordPressCategory {
  id: Int!
  name: String!
  slug: String!
  count: Int!
}

type WordPressTag {
  id: Int!
  name: String!
  slug: String!
  count: Int!
}

type WordPressPostType {
  name: String!
  label: String!
  public: Boolean!
}
```

## Input Types

```graphql
input ClusterInput {
  projectId: ID!
  hypothesisId: ID!
  title: String!
  intent: SeoClusterIntent!
  keywords: [String!]!
}

input BacklogIdeaInput {
  projectId: ID!
  hypothesisId: ID
  clusterId: ID
  title: String!
  description: String
  category: BacklogCategory
  status: BacklogStatus
  scheduledDate: DateTime
}

input SeoAgentBacklogIdeaInput {
  title: String
  description: String
  category: BacklogCategory
  status: BacklogStatus
  scheduledDate: DateTime
}

input AddContentIdeaToBacklogInput {
  contentIdeaId: ID!
  projectId: ID!
  hypothesisId: ID!
}

input CreateCustomContentIdeaInput {
  projectId: ID!
  hypothesisId: ID!
  title: String!
  category: ContentCategory!
}

input PostingSettingsInput {
  projectId: ID!
  hypothesisId: ID
  weeklyPublishCount: Int
  preferredDays: [String!]
  timezone: String
  autoPublishEnabled: Boolean
  language: String
  wordpressBaseUrl: String
  wordpressUsername: String
  wordpressAppPassword: String
  wordpressPostType: String
  wordpressDefaultCategoryId: Int
  wordpressDefaultTagIds: [Int!]
}

input ContentItemInput {
  id: ID
  projectId: ID!
  hypothesisId: ID!
  backlogIdeaId: ID
  title: String!
  category: ContentCategory!
  format: ContentFormat!
  ownerId: ID
  reviewerId: ID
  channel: String
  outline: String
  content: String
  imageUrl: String
  status: ContentStatus
  dueDate: DateTime
  userId: String
}

input GenerateContentInput {
  backlogIdeaId: ID!
  projectId: ID!
  hypothesisId: ID!
}

input GenerateImageInput {
  contentItemId: ID!
  title: String!
  description: String
}

input ApproveContentItemInput {
  contentItemId: ID!
  projectId: ID!
  hypothesisId: ID
}

input PublishToWordPressInput {
  contentItemId: ID!
  projectId: ID!
  hypothesisId: ID
  status: String
}

input TestWordPressConnectionInput {
  wordpressBaseUrl: String!
  wordpressUsername: String!
  wordpressAppPassword: String!
  postType: String
}

input RewriteTextSelectionInput {
  contentItemId: ID!
  selectedText: String!
  contextBefore: String
  contextAfter: String
  instruction: String
}
```

## Queries

```graphql
type Query {
  _health: String!
  seoClusters(projectId: ID!, hypothesisId: ID!): [SeoCluster!]!
  seoAgentClusters(projectId: ID!, hypothesisId: ID!): [SeoCluster!]!
  seoBacklog(projectId: ID!, hypothesisId: ID, status: BacklogStatus): [BacklogIdea!]!
  seoAgentBacklog(projectId: ID!, hypothesisId: ID): [BacklogIdea!]!
  seoAgentContentIdeas(projectId: ID!, hypothesisId: ID): [ContentIdea!]!
  seoAgentPostingSettings(projectId: ID!): PostingSettings
  seoContentQueue(projectId: ID!, hypothesisId: ID, status: ContentStatus): [ContentItem!]!
  contentItemByBacklogIdea(backlogIdeaId: ID!): ContentItem
  wordpressCategories(input: TestWordPressConnectionInput!): [WordPressCategory!]!
  wordpressTags(input: TestWordPressConnectionInput!): [WordPressTag!]!
  wordpressPostTypes(input: TestWordPressConnectionInput!): [WordPressPostType!]!
}
```

## Mutations

```graphql
type Mutation {
  upsertSeoCluster(input: ClusterInput!): SeoCluster!
  createSeoAgentCluster(input: ClusterInput!): SeoCluster!
  updateSeoAgentCluster(id: ID!, input: ClusterInput!): SeoCluster!
  deleteSeoCluster(id: ID!): Boolean!
  deleteSeoAgentCluster(id: ID!): Boolean!

  upsertBacklogIdea(input: BacklogIdeaInput!): BacklogIdea!
  updateSeoAgentBacklogIdea(id: ID!, input: SeoAgentBacklogIdeaInput!): BacklogIdea!
  deleteBacklogIdea(id: ID!): Boolean!
  deleteSeoAgentBacklogIdea(id: ID!): Boolean!

  addContentIdeaToBacklog(input: AddContentIdeaToBacklogInput!): BacklogIdea!
  dismissContentIdea(id: ID!): ContentIdea!
  createCustomContentIdea(input: CreateCustomContentIdeaInput!): ContentIdea!

  updateSeoAgentPostingSettings(input: PostingSettingsInput!): PostingSettings!

  upsertContentItem(input: ContentItemInput!): ContentItem!
  deleteContentItem(id: ID!): Boolean!
  generateContentForBacklogIdea(input: GenerateContentInput!): ContentItem!
  generateImageForContent(input: GenerateImageInput!): ContentItem!
  regenerateContent(id: ID!, promptPart: String): ContentItem!
  rewriteTextSelection(input: RewriteTextSelectionInput!): RewriteTextSelectionResult!
  approveContentItem(input: ApproveContentItemInput!): ContentItem!
  publishToWordPress(input: PublishToWordPressInput!): PublishToWordPressResult!
  testWordPressConnection(input: TestWordPressConnectionInput!): TestWordPressConnectionResult!
  generateContentIdeas(projectId: ID!, hypothesisId: ID!, category: String): [ContentIdea!]!
  logFrontendMessage(level: String!, message: String!, data: String): Boolean!
}
```

## Integration Notes

- This schema must be merged with existing `TRYGO-Backend/src/typeDefs/seoAgentTypeDefs.graphql`
- Some types may already exist (compare before merging)
- Ensure `scalar DateTime` is defined in base schema
- All queries and mutations must be preserved for frontend compatibility

